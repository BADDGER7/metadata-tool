<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>METADATA TOOL // ONLINE</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- ── ExifTool warning banner ── -->
{% if not exiftool_available %}
<div id="exiftool-banner" class="exiftool-banner">
    <span class="banner-icon">⚠</span>
    ExifTool not detected &mdash; extraction/removal may be limited. Install ExifTool for full functionality.
    <button class="banner-close" onclick="this.parentElement.style.display='none'">&times;</button>
</div>
{% endif %}

<!-- ── Header ── -->
<header class="site-header">
    <h1 class="glitch-text">[METADATA TOOL ONLINE]</h1>
    <p class="subtitle">// forensic metadata extraction &amp; sanitization utility &mdash; v2.0.0</p>
</header>

<!-- ── Main panel ── -->
<main class="terminal-panel">
    <!-- fake window bar -->
    <div class="window-bar">
        <div class="window-dots">
            <span class="dot dot-red"></span>
            <span class="dot dot-yellow"></span>
            <span class="dot dot-green"></span>
        </div>
        <span class="window-label">metadata_tool v2.0.0</span>
        <div class="window-flags">
            <span class="flag-icon" title="Secure">&#128274;</span>
            <span class="flag-icon" title="Local">&#127968;</span>
            <span class="flag-icon" title="Python">&#128013;</span>
        </div>
    </div>

    <div class="panel-inner">
        <!-- ═══ [1] SELECT FILE(S) ═══ -->
        <section class="section">
            <h2 class="section-title"><span class="section-num">[1]</span> SELECT FILE(S) <span class="section-hint">jpg / jpeg / png / pdf &mdash; max 30 MB</span></h2>

            <div id="drop-zone" class="drop-zone">
                <div class="drop-zone-text">
                    <span class="drop-icon">&#128194;</span>
                    <span>[ DROP FILES HERE OR CLICK TO BROWSE ]</span>
                </div>
            </div>

            <div class="file-controls">
                <label class="btn btn-outline" id="browse-btn">
                    BROWSE...
                    <input type="file" id="file-input" accept=".jpg,.jpeg,.png,.pdf" hidden>
                </label>
                <span class="file-status" id="file-status">No files selected.</span>
            </div>

            <!-- file info mini card -->
            <div id="file-info-mini" class="file-info-mini hidden">
                <div class="mini-row"><span class="mini-label">Name:</span> <span id="mini-name">—</span></div>
                <div class="mini-row"><span class="mini-label">Type:</span> <span id="mini-type">—</span></div>
                <div class="mini-row"><span class="mini-label">Size:</span> <span id="mini-size">—</span></div>
            </div>
        </section>

        <!-- ═══ [2] CHOOSE YOUR FUNCTION ═══ -->
        <section class="section">
            <h2 class="section-title"><span class="section-num">[2]</span> CHOOSE YOUR FUNCTION</h2>

            <div class="checkbox-group">
                <label class="cb-label">
                    <input type="checkbox" id="chk-extract" checked>
                    <span class="cb-box"></span>
                    <span class="cb-text">Extract &amp; display metadata</span>
                </label>
                <label class="cb-label">
                    <input type="checkbox" id="chk-risk">
                    <span class="cb-box"></span>
                    <span class="cb-text">Risk flag analysis</span>
                </label>
                <label class="cb-label">
                    <input type="checkbox" id="chk-header">
                    <span class="cb-box"></span>
                    <span class="cb-text">Raw header hex preview (first 256 bytes)</span>
                </label>
                <label class="cb-label">
                    <input type="checkbox" id="chk-clean">
                    <span class="cb-box"></span>
                    <span class="cb-text">Clean &amp; strip all metadata (download sanitized copy)</span>
                </label>
            </div>
        </section>

        <!-- ═══ [3] LAUNCH THE PROCESS ═══ -->
        <section class="section">
            <h2 class="section-title"><span class="section-num">[3]</span> LAUNCH THE PROCESS</h2>

            <div class="action-buttons">
                <button class="btn btn-primary" id="btn-analyze" disabled>
                    <span class="btn-icon">&#9654;</span> ANALYZE METADATA
                </button>
                <button class="btn btn-secondary" id="btn-clean" disabled>
                    <span class="btn-icon">&#128295;</span> CLEAN &amp; DOWNLOAD
                </button>
            </div>

            <!-- progress -->
            <div id="progress-bar" class="progress-bar hidden">
                <div class="progress-fill" id="progress-fill"></div>
                <span class="progress-text" id="progress-text">Processing...</span>
            </div>

            <!-- error display -->
            <div id="error-box" class="error-box hidden"></div>
        </section>

        <!-- ═══ RESULTS ═══ -->
        <div id="results-section" class="results-section hidden">

            <!-- FILE INFO -->
            <div class="result-card">
                <h3 class="card-title">&#128196; FILE INFO</h3>
                <div class="card-body" id="card-file-info"></div>
            </div>

            <!-- RISK FLAGS -->
            <div class="result-card" id="card-risk-wrap">
                <h3 class="card-title">&#9888; RISK FLAGS</h3>
                <div class="card-body" id="card-risk-flags"></div>
            </div>

            <!-- METADATA DETAILS -->
            <div class="result-card">
                <h3 class="card-title">&#128269; METADATA DETAILS</h3>
                <div class="card-body" id="card-metadata"></div>
            </div>

            <!-- RAW HEADER -->
            <div class="result-card" id="card-header-wrap">
                <h3 class="card-title">&#128187; RAW HEADER (HEX + ASCII)</h3>
                <div class="card-body" id="card-raw-header"></div>
            </div>

            <!-- ALL TAGS (collapsible) -->
            <div class="result-card">
                <h3 class="card-title collapsible-toggle" id="toggle-all-tags">
                    &#128209; ALL TAGS <span class="toggle-arrow">&#9660;</span>
                </h3>
                <div class="card-body collapsible-body" id="card-all-tags"></div>
            </div>

            <!-- Action buttons row -->
            <div class="result-actions">
                <button class="btn btn-outline" id="btn-copy-json">
                    &#128203; COPY JSON
                </button>
                <button class="btn btn-outline" id="btn-download-report">
                    &#128190; DOWNLOAD REPORT
                </button>
                <button class="btn btn-secondary" id="btn-download-clean" style="display:none;">
                    &#128295; DOWNLOAD CLEAN FILE
                </button>
            </div>
        </div>
    </div><!-- /panel-inner -->
</main>

<!-- ── Footer ── -->
<footer class="site-footer">
    <p>METADATA TOOL v2.0.0 &mdash; local analysis only &mdash; no data leaves your machine</p>
</footer>

<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
